<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ict.teamProject.schedule.service.impl.SCHMapper">	
	<resultMap type="SCHDto" id="SCHResult">
		 <!-- 'no'라는 속성은 쿼리 결과의 'no' 컬럼에 매핑. -->
		<result property="sNo" column="SCH_NO"/>
		<result property="id" column="ID"/>
		<result property="sTitle" column="SCH_TITLE"/>
		<result property="sContent" column="SCH_COMMENT"/>
		<result property="sEat" column="SCH_EAT"/>
		<result property="sExer" column="SCH_EXERCISE"/>
		<result property="sDest" column="SCH_DESTINATION"/>
		<result property="cal" column="CALENDAR"/>
		<result property="sArea" column="SCH_AREA"/>
		<result property="start" column="SCH_START"/>
		<result property="end" column="SCH_END"/>
		<result property="sCom" column="SCH_COMPLETE"/>
		<result property="rPathNo" column="RPATH_NO"/>
		<result property="sMate" column="SCH_MATEID"/>
	</resultMap>
	
	<!-- 스케줄 입력 -->
	<insert id="insert" parameterType="SCHDto">
		INSERT INTO SCHEDULE VALUES(default,#{id},#{sTitle},#{sContent},#{sEat},#{sExer},#{sDest},#{cal},#{sArea},#{start},#{end},default,null,null)
	</insert>
	
	<!-- 스케줄 하나만 조회 -->
	<select id="seleteOne" parameterType="String" resultType="SCHDto">
	  SELECT * FROM (SELECT * FROM SCHEDULE WHERE ID = #{id}) WHERE ROWNUM = 1
	</select>

	<!-- 스케줄 전체 조회 -->
	<select id="seleteAll" parameterType="String" resultMap="SCHResult">
	  SELECT * FROM SCHEDULE WHERE ID = #{id}
	</select>
	
	<!-- 오늘의 스케줄 전체 조회 -->
	<select id="seleteTodayAll" parameterType="String" resultMap="SCHResult">
	  SELECT * FROM SCHEDULE WHERE ID = #{id} AND TRUNC(SCH_START) = TRUNC(SYSDATE)
	  ORDER BY SCH_START
	</select>
	
	<!-- 해당 스케쥴 삭제 -->
	<delete id="deleteBBS" parameterType="map">
		DELETE SCHEDULE WHERE ID = #{id} and SCH_NO = #{sNo}
	</delete>


</mapper>